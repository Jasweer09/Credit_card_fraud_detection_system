<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Credit Card Fraud Detection</title>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      margin: 0;
      padding: 20px;
      background: #f0f2f5;
      color: #333;
    }

    h1 {
      text-align: center;
      color: #0073e6;
    }

    .note {
      text-align: center;
      margin-bottom: 20px;
      color: #444;
      font-size: 16px;
    }

    .note span {
      font-weight: bold;
      color: #d9534f;
    }

    .example-buttons {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 10px;
      margin-bottom: 20px;
    }

    .example-buttons button {
      padding: 8px 12px;
      background: #0073e6;
      color: white;
      border: none;
      border-radius: 5px;
      cursor: pointer;
    }

    .example-buttons button:hover {
      background: #005bb5;
    }

    textarea {
      width: 100%;
      height: 300px;
      padding: 10px;
      font-family: monospace;
      font-size: 14px;
      border: 1px solid #ccc;
      border-radius: 5px;
    }

    .predict-btn {
      margin-top: 20px;
      padding: 10px 20px;
      font-size: 16px;
      background-color: #28a745;
      color: white;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      display: block;
      margin-left: auto;
      margin-right: auto;
    }

    .predict-btn:hover {
      background-color: #218838;
    }

    .result-banner {
      margin-top: 30px;
      padding: 20px;
      text-align: center;
      font-size: 20px;
      border-radius: 10px;
      display: none;
    }

    .fraud {
      background-color: #f8d7da;
      color: #721c24;
      border: 2px solid #f5c6cb;
    }

    .non-fraud {
      background-color: #d4edda;
      color: #155724;
      border: 2px solid #c3e6cb;
    }
  </style>
</head>
<body>

<h1>Credit Card Fraud Detection</h1>

<div class="note">
  <p>This model is trained using PCA-transformed features (V1-V28), so actual transaction information is hidden for privacy and security. <br/>
  <span>Note:</span> You can copy example JSONs below and paste them into the box to test the prediction.</p>
</div>

<div class="example-buttons">
  <button onclick="copyExample(0)">Fraud Example 1</button>
  <button onclick="copyExample(1)">Fraud Example 2</button>
  <button onclick="copyExample(2)">Non-Fraud Example 1</button>
  <button onclick="copyExample(3)">Non-Fraud Example 2</button>
</div>

<textarea id="jsonInput" placeholder="Paste your JSON input here..."></textarea>

<button class="predict-btn" onclick="predict()">Predict</button>

<div id="result" class="result-banner"></div>

<script>
  const examples = [
    {
      "Time": 406, "V1": -2.3122, "V2": 1.9520, "V3": -1.6099, "V4": 3.9979,
      "V5": -0.5222, "V6": -1.4265, "V7": -2.5374, "V8": 1.3917, "V9": -2.7701,
      "V10": -2.7723, "V11": 3.2020, "V12": -2.8999, "V13": -0.5952, "V14": -4.2893,
      "V15": 0.3897, "V16": -1.1407, "V17": -2.8301, "V18": -0.0168, "V19": 0.4170,
      "V20": 0.1269, "V21": 0.5172, "V22": -0.0350, "V23": -0.4652, "V24": 0.3202,
      "V25": 0.0445, "V26": 0.1778, "V27": 0.2611, "V28": -0.1433, "Amount": 0
    },
    {
      "Time": 472, "V1": -3.0435, "V2": -3.1573, "V3": 1.0885, "V4": 2.2886,
      "V5": 1.3598, "V6": -1.0648, "V7": 0.3256, "V8": -0.0678, "V9": -0.2710,
      "V10": -0.8386, "V11": -0.4146, "V12": -0.5031, "V13": 0.6765, "V14": -1.6920,
      "V15": 2.0006, "V16": 0.6668, "V17": 0.5997, "V18": 1.7253, "V19": 0.2833,
      "V20": 2.1023, "V21": 0.6617, "V22": 0.4355, "V23": 1.3760, "V24": -0.2938,
      "V25": 0.2798, "V26": -0.1454, "V27": -0.2528, "V28": 0.0358, "Amount": 529
    },
    {
      "Time": 34, "V1": 1.1919, "V2": 0.2661, "V3": 0.1665, "V4": 0.4482,
      "V5": 0.0600, "V6": -0.0824, "V7": -0.0788, "V8": 0.0851, "V9": -0.2554,
      "V10": -0.1660, "V11": 1.6127, "V12": 1.0652, "V13": 0.4891, "V14": -0.1430,
      "V15": 0.6356, "V16": 0.4639, "V17": -0.1148, "V18": -0.1834, "V19": -0.1457,
      "V20": -0.0691, "V21": -0.2258, "V22": -0.6386, "V23": 0.1013, "V24": -0.3398,
      "V25": 0.1671, "V26": 0.1259, "V27": -0.0080, "V28": 0.0147, "Amount": 2.69
    },
    {
      "Time": 345, "V1": 1.1239, "V2": 0.2750, "V3": 0.2200, "V4": 0.4102,
      "V5": 0.0721, "V6": -0.0804, "V7": -0.0759, "V8": 0.0952, "V9": -0.2488,
      "V10": -0.1620, "V11": 1.5671, "V12": 1.0452, "V13": 0.4991, "V14": -0.1570,
      "V15": 0.6216, "V16": 0.4578, "V17": -0.1089, "V18": -0.1903, "V19": -0.1559,
      "V20": -0.0673, "V21": -0.2385, "V22": -0.6285, "V23": 0.0991, "V24": -0.3334,
      "V25": 0.1631, "V26": 0.1198, "V27": -0.0068, "V28": 0.0162, "Amount": 3.15
    }
  ];

  function copyExample(index) {
    document.getElementById("jsonInput").value = JSON.stringify(examples[index], null, 2);
  }

  function predict() {
    const input = document.getElementById("jsonInput").value;
    const resultDiv = document.getElementById("result");
    resultDiv.style.display = "none";

    fetch("/predict", {
      method: "POST",
      headers: {
        "Content-Type": "application/json"
      },
      body: input
    })
    .then(response => response.json())
    .then(data => {
      resultDiv.style.display = "block";
      if (data.prediction === 1) {
        resultDiv.className = "result-banner fraud";
        resultDiv.textContent = "⚠️ Fraudulent Transaction Detected!";
      } else {
        resultDiv.className = "result-banner non-fraud";
        resultDiv.textContent = "✅ This Transaction is Safe (Non-Fraud).";
      }
    })
    .catch(err => {
      resultDiv.style.display = "block";
      resultDiv.className = "result-banner fraud";
      resultDiv.textContent = "Error: Invalid input or server error.";
    });
  }
</script>

</body>
</html>
